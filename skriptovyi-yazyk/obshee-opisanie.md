# Общее описание

Чтобы не городить обработку с вычитанием байт-кодов было решено сразу использовать двухбайтовые команды - указатели на процедуры обработки.

В процедуру обработки обычно передается в регистре **HL** указатель на текущее место в скрипте чтобы она могла самостоятельно считать входные значения сдвигая **HL** на нужное кол-во байт. После отработки процедура возвращает управление в основной цикл с указателем **HL** на следующую функцию.

Поддержка модулей и макросов в sjasmplus позволила реализовать некоторое подобие языка.

```swift
MODULE screenfx
...
        MACRO ShowSprite pos_x, pos_y, spr_num
        dw screenfx.show_sprite_me
        db pos_y
        db pos_x
        db spr_num
    ENDM
...
ENDMODULE    
```

Основной цикл передаст управление по адресу **screenfx.show\_sprite\_me**, процедура считает значения позиции и номера спрайта, отрисует на экране спрайт и возвратит управление обратно в основной цикл.



